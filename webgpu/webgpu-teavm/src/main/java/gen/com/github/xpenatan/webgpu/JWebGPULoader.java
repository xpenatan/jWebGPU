/*-------------------------------------------------------
 * This file was generated by JParser
 *
 * Do not make changes to this file
 *-------------------------------------------------------*/

package gen.com.github.xpenatan.webgpu;

import com.github.xpenatan.jParser.loader.JParserLibraryLoader;
import com.github.xpenatan.jParser.loader.JParserLibraryLoaderListener;
import com.github.xpenatan.jParser.loader.JParserLibraryLoaderOptions;
import com.github.xpenatan.jparser.idl.IDLLoader;

/**
 * @author xpenatan
 */
public class JWebGPULoader {

    private static void initInternal(JWebGPUBackend backend, JParserLibraryLoaderListener listener) {
        JWebGPULoader.backend = JWebGPUBackend.DAWN;
        JParserLibraryLoader.load("jWebGPU", listener);
    }

    private static JWebGPUBackend backend;

    public static void init(JParserLibraryLoaderListener listener) {
        init(JWebGPUBackend.WGPU, listener);
    }

    public static void init(JWebGPUBackend backend, JParserLibraryLoaderListener listener) {
        IDLLoader.init(new JParserLibraryLoaderListener() {

            @Override
            public void onLoad(boolean idl_isSuccess, Exception idl_e) {
                if (idl_isSuccess) {
                    initInternal(backend, listener);
                } else {
                    listener.onLoad(false, idl_e);
                }
            }
        });
    }

    public static JWebGPUBackend getBackend() {
        return backend;
    }
}
